<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- displays site properly based on user's device -->

    <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">

    <style type="text/tailwindcss">

    </style>

    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>

    <script src="https://cdn-tailwindcss.vercel.app"></script>

    <script>
        tailwind.config = {
            theme: {
                screens: {
                    d: '1366px',
                },
                extend: {
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(ellipse at center, var(--tw-gradient-stops))',
                    }
                },
                fontFamily: {
                    'sans': 'BarlowSemiCondensed'
                }
            },
        }
    </script>

    <title>Frontend Mentor | Rock, Paper, Scissors</title>

    <style type="text/tailwindcss">

        @font-face {
            font-family: "BarlowSemiCondensed";
            font-weight: 600;
            src: url("fonts/BarlowSemiCondensed-Bold.ttf") format("truetype");
        }

        @font-face {
            font-family: "BarlowSemiCondensed";
            font-weight: 700;
            src: url("fonts/BarlowSemiCondensed-SemiBold.ttf") format("truetype");
        }

        .attribution {
            display: none;
            font-size: 11px;
            text-align: center;
        }

        .attribution a {
            color: hsl(228, 45%, 44%);
        }
    </style>
</head>
<body class="bg-gradient-radial from-[#1f3756] to-[#141539] min-h-screen h-full w-screen p-[32px] pb-[54px]">
<div id="app" class="flex flex-col justify-between max-w-[660px] d:max-w-[760px] min-h-[581px] mx-auto my-auto">
    <div class="border-[3px] border-opacity-50 border-[#606e85] rounded w-full flex pl-[20px] pr-[10px] py-[12px] justify-between">
        <ul class="flex flex-col justify-center">
            <li v-for="choice in gameName" class="text-xl d:text-3xl text-white leading-4 d:leading-[25px] uppercase font-bold">{{ choice }}</li>
        </ul>
        <div class="flex flex-col items-center bg-white px-[20px] py-[10px] rounded">
            <div class="uppercase text-xs text-[#2a46c0] font-semibold tracking-widest">Score</div>
            <div class="text-4xl d:text-5xl font-bold">{{ score }}</div>
        </div>
    </div>
    <div class="flex justify-center items-center w-full h-full">
        <div class="h-[200px] w-[310px] mx-auto relative" v-if="step === 1">
            <img class="h-[200px] mx-auto" src="images/bg-triangle.svg" alt="bg-triangle">
            <div v-for="(choice, index) in gameChoices" :title="choice.name" @click="play(choice)"
                 :class="choiceBorder(choice.color) + ' ' + position(index)"
                 class="h-[130px] w-[130px] rounded-full bg-white absolute flex justify-center items-center border-[15px] cursor-pointer">
                <img :src="choice.img" :alt="choice.name">
            </div>
        </div>
        <div v-if="step > 1"
             class="grid grid-rows-[150px,75px] d:grid-rows-[300px,100px] my-auto w-full items-center justify-center relative"
             :class="stepCols">
            <div :class="choiceBorder(this.choice.color)"
                 :title="choice.name"
                 class="mx-auto h-[130px] w-[130px] d:h-[250px] d:w-[250px] rounded-full bg-white flex justify-center items-center border-[15px] d:border-[30px]">
                <img class="h-[50px] w-[50px] d:h-[100px] d:w-[100px]" :src="this.choice.img" :alt="this.choice.name">
            </div>
            <div v-if="step === 4" @click="playAgain()" class="flex flex-col items-center row-start-3 col-span-2 d:col-span-1 d:rows-start-1 mt-[10px] d:mt-0">
                <div class="text-5xl text-white uppercase font-bold">{{ this.message }}</div>
                <div class="flex flex-col items-center bg-white px-[60px] py-[10px] rounded mt-4 d:mt-2">
                    <div class="uppercase text-[#2a46c0] font-semibold tracking-widest">Play again</div>
                </div>
            </div>
            <div v-if="this.houseChoice === ''"
                 class="mx-auto h-[115px] w-[115px] d:h-[250px] d:w-[250px] rounded-full bg-[#172240] flex justify-center items-center"></div>
            <div v-else :class="choiceBorder(this.houseChoice.color)"
                 :title="houseChoice.name"
                 class="mx-auto h-[130px] w-[130px] d:h-[250px] d:w-[250px] rounded-full bg-white flex justify-center items-center border-[15px] d:border-[30px]">
                <img class="h-[50px] w-[50px] d:h-[100px] d:w-[100px]" :src="this.houseChoice.img"
                     :alt="this.houseChoice.name">
            </div>
            <div class="uppercase text-lg text-white mx-auto">You picked</div>
            <div class="uppercase text-lg text-white mx-auto" :class="step === 4 ? 'd:col-start-3' : ''">The house picked</div>
        </div>
    </div>
    <div class="flex justify-center">
        <div class="border-[2px] border-opacity-50 uppercase py-[12px] px-[35px] rounded-xl text-white">
            Rules
        </div>
    </div>
</div>
<div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
    Coded by <a href="#">Your Name Here</a>.
</div>
</body>
</html>

<script>
    var app = new Vue({
        el: '#app',
        mounted() {
            this.$nextTick(() => {
                window.addEventListener('resize', this.onResize);
            })
        },
        beforeDestroy() {
            window.removeEventListener('resize', this.onResize);
        },
        data: {
            windowWidth: window.innerWidth,
            selectedGame: 0,
            score: 0,
            step: 1,
            choice: '',
            houseChoice: '',
            message : '',
            choices: [
                [
                    {
                        name: 'Rock',
                        color: '#dc2e4e',
                        img: 'images/icon-rock.svg',
                        strength: ['Scissors'],
                        weakness: ['Paper'],
                    },
                    {
                        name: 'Paper',
                        color: '#4865f4',
                        img: 'images/icon-paper.svg',
                        strength: ['Rock'],
                        weakness: ['Scissors'],
                    },
                    {
                        name: 'Scissors',
                        color: '#ec9e0e',
                        img: 'images/icon-scissors.svg',
                        strength: ['Paper'],
                        weakness: ['Rock'],
                    }
                ],
                [
                    {
                        name: 'Rock',
                        color: '#dc2e4e',
                        img: 'images/icon-rock.svg'
                    },
                    {
                        name: 'Paper',
                        color: '#4865f4',
                        img: 'images/icon-pepper.svg'
                    },
                    {
                        name: 'Scissors',
                        color: '#ec9e0e',
                        img: 'images/icon-scissors.svg'
                    }, 'Lizard', 'Spock']]
        },
        methods: {
            onResize() {
                this.windowWidth = window.innerWidth
            },
            play: function (choice) {
                this.step++; //STEP 2
                this.choice = choice
                setTimeout(() => {
                    this.step++ //STEP 3
                    this.houseChoice = this.gameChoices[Math.floor(Math.random() * this.gameChoices.length)]
                    setTimeout(() => {
                        this.step++ //STEP 4
                        if (choice.strength.includes(this.houseChoice.name)) {
                            this.message= 'You win'
                            this.score++
                        }
                        else if (choice.weakness.includes(this.houseChoice.name))
                            this.message= 'You loose'
                        else
                            this.message= 'Tie'
                    }, 1000)
                }, 1000)
            },
            choiceBorder: function (color) {
                return `border-[${color}]`
            },
            position: function (index) {
                switch (index) {
                    case 0:
                        return 'left-0 top-[-55px]'
                    case 1:
                        return 'right-0 top-[-55px]'
                    case 2:
                        return 'left-0 translate-x-[70%] bottom-[-55px]'
                }
            },
            playAgain() {
                this.step = 1
                this.houseChoice = ''
                this.choice = ''
            }
        },
        computed: {
            gameName() {
                return this.gameChoices.map((e) => e.name)
            },
            gameChoices() {
                return this.choices[this.selectedGame]
            },
            stepCols() {
                return this.step === 4 ? 'grid-cols-2 d:grid-cols-3' : 'grid-cols-2'
            }
        },
    })
</script>